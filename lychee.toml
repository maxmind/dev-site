# Lychee link checker configuration
# https://lychee.cli.rs/#/usage/config
#
# To check the generated site (after running `hugo`):
#   lychee './public/**/*.html'
#
# To check source files:
#   lychee './content/**/*.md' './assets/**/*.md'

# Base URL for resolving relative links
# This allows checking internal site links against the live/generated site
base_url = "https://dev.maxmind.com"

# Include URL fragments in checks
include_fragments = true

# Don't allow any redirects
max_redirects = 0

# Accept these HTTP status codes
# 100-103: Informational responses
# 200-299: Success responses
# 403: Forbidden (some sites use for rate limiting)
# 429: Too Many Requests
# 500-599: Server errors (temporary issues shouldn't fail CI)
# 999: LinkedIn's custom status code
accept = [
    "100..=103",
    "200..=299",
    "403",
    "429",
    "500..=599",
    "999"
]

# Exclude URL patterns from checking (treated as regular expressions)
exclude = [
    '^file://',                                                 # Local file:// URLs
    # Exclude internal dev.maxmind.com links (they're relative paths in source)
    # To check internal links, run against generated site: lychee './public/**/*.html'
    '^https://dev\.maxmind\.com/',
    '^https://deno\.land',                                      # Deno documentation
    '^https://github\.com/[^/]+/[^/]+/blob/[0-9a-fA-F]+/.+#L\d+$', # GitHub blob URLs with line numbers
    '^https://jsr\.io',                                         # JSR (JavaScript Registry)
    '^https://sandbox\.maxmind\.com',                           # MaxMind sandbox environment
    '^https://minfraud\.maxmind\.com',                          # MaxMind minFraud service
    'https://www\.iso\.org/obp/ui/#iso:code:3166:ZA',          # ISO country code reference
    '^https://www\.maxmind\.com/en/accounts/',                  # MaxMind account pages (require login)
]

# Exclude file paths from getting checked (treated as regular expressions)
exclude_path = [
    'node_modules',  # Exclude node_modules directory
]

# Cache results for 1 day to speed up repeated checks
cache = true
max_cache_age = "1d"

# Skip missing input files instead of erroring
skip_missing = true
