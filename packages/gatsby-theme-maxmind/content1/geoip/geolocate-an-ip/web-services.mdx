---
draft: false
title: Geolocate an IP address using Web Services
---

import CurlExamples from '../_curl-examples.mdx';

Geolocating an IP address using GeoIP2 or GeoLite2 web services consists of
configuring a web service client, creating a request, and handling the response.

## Implementation

MaxMind offers and highly recommends using [official client
libraries](#official-api-clients) to access our geolocation services. If you
cannot or do not wish to use our client libraries, please review our [GeoIP2 API
Documentation page](/geoip/docs/web-services/#request-and-response-api-references)
for details on our REST API.

### 1. Install the GeoIP2 client library

We have a collection of officially supported libraries for you to interact with
the GeoIP2 and GeoLite2 APIs:

<CodeSet>

```cli-csharp
# Install via NuGet
Install-Package MaxMind.GeoIP2
```

```cli-java
# Install via Maven, recommended
<dependency>
  <groupId>com.maxmind.geoip2</groupId>
  <artifactId>geoip2</artifactId>
  <version>2.15.0</version>
</dependency>

# Or install via Gradle
repositories {
  mavenCentral()
}
dependencies {
  compile 'com.maxmind.geoip2:geoip2:2.15.0'
}
```

```cli-javascript
# Install via npm
npm install @maxmind/geoip2-node

# Or install via yarn
yarn add @maxmind/geoip2-node
```

```cli-php
# Install via Composer
composer require geoip2/geoip2:~2.0
```

```cli-python
# Install via pip
pip install geoip2
```

```cli-ruby
# Install as a gem
gem install maxmind-geoip2

# Or add this to your Gemfile
gem 'maxmind-geoip2'
```

</CodeSet>

### 2. Create and configure a GeoIP2 client object

To interact with our API, you need to create a new client object. For this you
will need your MaxMind [account ID and license
key](https://www.maxmind.com/en/accounts/current/license-key).  Our clients
also allow you to interact with our GeoLite2 API, but this requires additional
configuration as demonstrated below:

<CodeSet>

```csharp
var client = new WebServiceClient(10, "LICENSEKEY");

// To query the GeoLite2 web service, you must set the optional `host` parameter
to `geolite.info`
var client = new WebServiceClient(10, "LICENSEKEY", host: "geolite.info");

```

```java
WebServiceClient client = new WebServiceClient.Builder(10, "LICENSEKEY").build();

// To query the GeoLite2 web service, you must call the `host` method on the
// builder with "geolite.info"
WebServiceClient client = new WebServiceClient.Builder(10, "LICENSEKEY").host("geolite.info").build();
```

```javascript
const client = new WebServiceClient('10', 'LICENSEKEY');

// To query the GeoLite2 web service, you must set the optional `host` parameter
const client = new WebServiceClient('10', 'LICENSEKEY', {host: 'geolite.info'});
```

```php
$client = new Client(10, 'LICENSEKEY');

// To query the GeoLite2 web service, you must set the optional `host` argument.
// The third argument specifies the language preferences when using the `->name`
// method on the model classes that this client creates.
$client = new Client(10, 'LICENSEKEY', ['en'], ['host' => 'geolite.info']);
```

```python
# If you want to use synchronous requests
client = Client(10, 'LICENSEKEY');
# To query the GeoLite2 web service, you must set the "host" keyword argument
# to "geolite.info"
client = Client(10, 'LICENSEKEY', host='geolite.info');

# Or if you want to use asynchronous requests
async_client = AsyncClient(10, 'LICENSEKEY');

# To query the GeoLite2 web service, you must set the "host" keyword argument
# to "geolite.info"
async_client = AsyncClient(10, 'LICENSEKEY', host='geolite.info');
```

```ruby
Minfraud.configure do |c|
  c.account_id = 10
  c.license_key = 'LICENSEKEY'

  # To use the GeoLite2 web service instead of GeoIP2 Precisions, set the host
  # parameter to "geolite.info", eg:
  # host: 'geolite.info'
end
```

</CodeSet>

### 3. Query the desired geolocation service

GeoIP2 Precision offers 3 services: Insights, City, and Country.  GeoLite2
offers 2 services: City and Country.  Each client library has an appropriately
named method for accessing the desired geolocation service.

<CodeSet>

```csharp
// If you are making multiple requests, a single WebServiceClient
// should be shared across requests to allow connection reuse. The
// class is thread safe.

// Sync
using (var client = new WebServiceClient(10, "license_key"))
{
    // You can also use `client.City` or `client.Insights`
    // `client.Insights` is not available to GeoLite2 users
    var response = client.Country("128.101.101.101");

    Console.WriteLine(response.Country.IsoCode);        // 'US'
    Console.WriteLine(response.Country.Name);           // 'United States'
    Console.WriteLine(response.Country.Names["zh-CN"]); // '美国'
}

// Async
using (var client = new WebServiceClient(10, "license_key"))
{
    // You can also use `client.CityAsync` or `client.InsightsAsync`
    // `client.InsightsAsync` is not available to GeoLite2 users
    var response = await client.CountryAsync("128.101.101.101");

    Console.WriteLine(response.Country.IsoCode);        // 'US'
    Console.WriteLine(response.Country.Name);           // 'United States'
    Console.WriteLine(response.Country.Names["zh-CN"]); // '美国'
}
```

```java
try (WebServiceClient client = new WebServiceClient.Builder(42, "license_key")
        .build()) {

    InetAddress ipAddress = InetAddress.getByName("128.101.101.101");

    // You can also use `client.city` or `client.insights`
    // `client.insights` is not available to GeoLite2 users
    CountryResponse response = client.country(ipAddress);

    Country country = response.getCountry();
    System.out.println(country.getIsoCode());            // 'US'
    System.out.println(country.getName());               // 'United States'
    System.out.println(country.getNames().get("zh-CN")); // '美国'
}
```

```javascript
const WebServiceClient = require('@maxmind/geoip2-node').WebServiceClient;
// Typescript:
// import { WebServiceClient } from '@maxmind/geoip2-node';

// You can also use `client.city` or `client.insights`
// `client.insights` is not available to GeoLite2 users
client.country('142.1.1.1').then(response => {
  console.log(response.country.isoCode); // 'CA'
});
```

```php
<?php require_once 'vendor/autoload.php'
use GeoIp2\WebService\Client;

$client = new Client(10, 'LICENSEKEY');

// You can also use `$client->city` or `$client->insights`
// `$client->insights` is not available to GeoLite2 users
$record = $client->country('128.101.101.101');

print($record->country->isoCode . "\n");
```

```python
# Sync
import geoip2.webservice

with geoip2.webservice.Client(10, 'license_key') as client:
  # You can also use `client.city` or `client.insights`
  # `client.insights` is not available to GeoLite2 users
  response = client.country('128.101.101.101)

  print(response.country.iso_code)

# Async
import asyncio
import geoip2.webservice

async def main():
  async with geoip2.webservice.AsyncClient(10, 'license_key') as client:
    # You can also use `client.city` or `client.insights`
    # `client.insights` is not available to GeoLite2 users
    response = await client.country('128.101.101.101)

    print(response.country.iso_code)

asyncio.run(main())
```

```ruby
require 'maxmind/geoip2'

Minfraud.configure do |c|
  c.account_id = 10
  c.license_key = 'LICENSEKEY'
end

# You can also use `client.city` or `client.insights`
# `client.insights` is not available to GeoLite2 users
record = client.country('128.101.101.101')

puts record.country.iso_code
```

</CodeSet>

## Client APIs
You can find a complete list of official and third-party client APIs on the [web
services documentation page](/geoip/docs/web-services#api-clients).

## Command Line (curl) Examples

<CurlExamples />
